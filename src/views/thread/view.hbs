<!--<div class="divided grid" style=" margin-right: 3em; margin-top: 3em; font-size: 12px; font-weight: normal !important;">
	<h5 class="ui center red inverted top attached header" style="border-radius: 0px; font-size: 12px; font-family: monospace;"> #: {{this.response_object.thread.main_post.id}} | TIME: {{this.response_object.thread.main_post.timestamp}} | UUID: {{this.response_object.thread.main_post.response_object.thread_UUID}} </h5>
	<div class="ui center inverted attached segment" style="border-radius: 0px;">
		<p>
			<h3>{{response_object.thread.main_post.title}}</h3>
			{{response_object.thread.main_post.comment}}
		</p>
	</div>
</div>
<div class="divided grid" style=" margin-left: 3em; margin-top: 3em; font-size: 12px; font-weight: normal !important;">
	{{#each response_object.thread.comments}}
	<h5 class="ui center red inverted top attached header" style="border-radius: 0px; font-family: monospace;"> #: {{this.id}} | TIME: {{this.timestamp}} | UUID: {{this.comment_UUID}} </h5>
	<div class="ui center inverted attached segment" style="border-radius: 0px;">
		<p>
			{{this.post}}
		</p>
	</div>
	{{/each}}
</div>
<div class="divided grid" style="margin-top: 3em; font-size: 12px; font-weight: normal !important;">
	<h5 class="ui center red inverted top attached header" style="border-radius: 0px; font-family: monospace;">POST</h5>
	<div id="post_box" class="ui center inverted attached segment" style="padding: 2em; border-radius: 0px;">
		<div id="text_input" class="ui inverted form">
			<textarea class="inverted" style="background: #00000052; color: white; margin-top: 0px; margin-bottom: 0px; height: 112px; border-radius: 0px; font-family: monospace;"></textarea>
			<div id="submit_add" class="ui inverted right red button" style="text-align: center; border-radius: 0px; margin: 1em; font-family: monospace; margin-left: calc( 50% - 43px );">Submit</div>
		</div>
		<div id="loader_div">
			<div id="loader" class="ui loader"></div>
		</div>
	</div>
</div>
-->




<!--<div id="board-vue">

	<div v-for="thread in threads">

		<div class="divided grid thread-head" style=" margin-right: 3em; margin-top: 3em; font-size: 12px; font-weight: normal !important;">
			<h5 class="ui center red inverted top attached header" style="border-radius: 0px; font-size: 12px; font-family: monospace;"> #: 2145 | TIME: NOW | UUID: 1234 </h5>
			<div class="ui center inverted attached segment" style="border-radius: 0px;">
				<p>
					<h3 style="font-family: monospace;">${thread.head_title}</h3>
					${thread.head_post}
				</p>
			</div>
		</div>

		<div class="divided grid" style="margin-top: 3em; font-size: 12px; font-weight: normal !important;" v-for="comment in thread.replies">
			<h5 class="ui center red inverted top attached header" style="border-radius: 0px; font-family: monospace; margin-left: 3em; margin-right: -44px"> #: 3123 | TIME: NOW | UUID: UUID </h5>

			<div class="ui center inverted attached segment" style="border-radius: 0px; margin-left: 3em">
				<p>
					${comment}
				</p>
			</div>
		</div>

		<div class="divided grid" style="margin-top: 3em; font-size: 12px; font-weight: normal !important;">
			<h5 class="ui center red inverted top attached header" style="border-radius: 0px; font-family: monospace; margin-left: 3em; margin-right: -44px;">POST</h5>
			<div id="post_box" class="ui center inverted attached segment" style="padding: 2em; border-radius: 0px; margin-left: 3em; margin-right: -44px;">
				<div id="text_input" class="ui inverted form">
					<textarea class="inverted" style="background: #00000052; color: white; margin-top: 0px; margin-bottom: 0px; height: 112px; border-radius: 0px; font-family: monospace;" v-model="threads[0].new_reply" @keyup.enter="add_reply"></textarea>
				</div>
				<div id="loader_div">
					<div id="loader" class="ui loader"></div>
				</div>
			</div>
		</div>
	
	</div>
</div>


</div>-->

<div id="board-vue">

	<div class="divided grid" style="margin-top: 3em; margin-right: 3em; font-size: 12px; font-weight: normal !important;">
		<h5 class="ui center red inverted top attached header" style="border-radius: 0px; font-family: monospace;">NEW THREAD</h5>
		<div id="post_box" class="ui center inverted attached segment" style="padding: 2em; border-radius: 0px; height: 207px;">
			<div id="text_input" class="ui inverted form">
				<input id="thread_title" style="border-radius: 0px; color: white; background: #00000052;" @keyup.enter="post_thread" v-model="thread_title" placeholder="Thread Title" type="text">
				<textarea class="inverted" placeholder="Thread Body" style="background: #00000052; color: white; margin-top: 0px; margin-bottom: 0px; height: 112px; border-radius: 0px; font-family: monospace;" v-model="thread_head" @keyup.enter="post_thread"></textarea>
			</div>
			<div id="loader_div">
				<div id="loader" class="ui loader"></div>
			</div>
		</div>
	</div>


	<div v-for="thread in threads">

		<div class="divided grid thread-head" style=" margin-right: 3em; margin-top: 3em; font-size: 12px; font-weight: normal !important;">
			<h5 class="ui center red inverted top attached header" style="border-radius: 0px; font-size: 12px; font-family: monospace;"> #: 2145 | TIME: NOW | UUID: 1234 </h5>
			<div class="ui center inverted attached segment" style="border-radius: 0px; padding-bottom: 3em; padding-left: 3em; padding-right: 3em;">
				<p>
					<h3 style="font-family: monospace;">${thread.head_title}</h3>
					${thread.head_post}
				</p>
			</div>
		</div>
	
	</div>
</div>

<script>

	let boardVue = new Vue({
		el: '#board-vue',
		data: {
			thread_head: '',
			thread_title: '',
			threads: []
		},
		delimiters: ['${', '}'],
		methods: {
			add_reply: function() {
				this.threads[0].replies.push(this.threads[0].new_reply);
				this.threads[0].new_reply = '';
				return false;
			},
			post_thread: function() {
				var thread_to_post = {
					title: this.thread_title,
					post: this.thread_head
				}
				this.threads.unshift({head_post: this.thread_head, head_title: this.thread_title, new_reply: '', replies: []});
				$.post('/api/threads/{{this.board}}', thread_to_post, function(response){
					console.log(response);
					boardVue._data.thread_head = '';
					boardVue._data.thread_title = '';
					return false;
				})
			}
		},
		mounted: function() {
			console.log('running boardVue get_thread');
			let this_obj = this;
			$.get('/api/threads/{{this.board}}', function(response){
				var thread_object = JSON.parse(response);
				console.log(thread_object);
				for(var i = 0;i<thread_object.threads.length;i++){
					boardVue._data.threads.push(
						{
							head_post: thread_object.threads[i].post, 
							head_title: thread_object.threads[i].title,
							new_reply: '',
							replies: [],
						}
					)
				}
			})
		}
	});

		//prevents page refresh when you press enter while cursor is in the input field.
	$(document).ready(function(){
	
		$(document).keypress(function(e) {
			if(e.which == 13) {
				e.preventDefault();
			}
		});
	});

</script>